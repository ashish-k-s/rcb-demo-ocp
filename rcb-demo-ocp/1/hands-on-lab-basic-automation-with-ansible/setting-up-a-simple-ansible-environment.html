<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up a simple Ansible environment :: OpenShift Basics</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">OpenShift Basics</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rcb-demo-ocp" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">OpenShift Basics</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction-to-container-orchestration-and-its-benefits/introduction-to-container-orchestration-and-its-benefits.html">Introduction to container orchestration and its benefits</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-container-orchestration-and-its-benefits/overview-of-kubernetes-and-red-hat-openshift.html">Overview of Kubernetes and Red Hat OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understanding-openshift-architecture-and-components/understanding-openshift-architecture-and-components.html">Understanding OpenShift architecture and components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understanding-openshift-architecture-and-components/nodes-pods-services-and-deployments.html">Nodes, Pods, Services, and Deployments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understanding-openshift-architecture-and-components/routes-ingress-and-network-policies.html">Routes, Ingress, and Network Policies</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-applications-on-openshift/deploying-applications-on-openshift.html">Deploying applications on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-applications-on-openshift/creating-projects-and-users.html">Creating projects and users</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-applications-on-openshift/building-container-images.html">Building container images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-applications-on-openshift/using-source-to-image-s2i-for-application-deployment.html">Using Source-to-Image (S2I) for application deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-labs/hands-on-labs.html">Hands-on Labs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs/deploy-application-in-openshift.html">Deploy application in OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift Basics</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">OpenShift Basics</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">OpenShift Basics</a></li>
    <li><a href="setting-up-a-simple-ansible-environment.html">Setting up a simple Ansible environment</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Setting up a simple Ansible environment</h1>
<div class="sect1">
<h2 id="_hands_on_lab_basic_automation_with_ansible"><a class="anchor" href="#_hands_on_lab_basic_automation_with_ansible"></a>Hands-on Lab: Basic Automation with Ansible</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>= Setting up a Simple Ansible Environment</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>This hands-on lab will guide you through setting up a basic Ansible environment, enabling you to automate simple system configurations and manage files. By following this activity, you'll gain practical experience in using Ansible as a configuration management tool.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>### Prerequisites</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Before starting the lab, ensure that:</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You have an understanding of Linux command line basics.</p>
</li>
<li>
<p>You have installed Git on your local machine for version control (optional but recommended).</p>
</li>
<li>
<p>You have an account with a cloud provider like AWS, Azure, or Google Cloud Platform (for creating virtual machines) or physical access to a few Linux servers (e.g., VirtualBox, VMware).</p>
<div class="literalblock">
<div class="content">
<pre>### Step 1: Prepare Managed Nodes</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>For this lab, you need at least two Linux servers/virtual machines: one will act as the Control Node (Ansible server), and the other(s) will be Managed Nodes (target systems to automate).</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Control Node:</strong> Install Ansible on your control node.</p>
<div class="literalblock">
<div class="content">
<pre>```bash
sudo apt update
sudo apt install ansible -y  # For Debian/Ubuntu based distributions
# or</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo yum install ansible -y  # For RHEL/CentOS based distributions
```</pre>
</div>
</div>
</li>
<li>
<p><strong>Managed Nodes:</strong> Install the OpenSSH server package on each managed node to enable remote communication.</p>
<div class="literalblock">
<div class="content">
<pre>```bash
sudo apt update
sudo apt install openssh-server -y  # For Debian/Ubuntu based distributions
# or</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo yum install openssh-server -y  # For RHEL/CentOS based distributions
```</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Ensure that firewalls allow SSH connections (e.g., using `ufw` for Ubuntu):</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>```bash
sudo ufw allow ssh
```</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>### Step 2: Configure Inventories</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Create an inventory file named `inventory.ini` to list your managed nodes and their associated groups. Here's a simple example with one group called `webservers`:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>```ini
[webservers]
node1 ansible_host=&lt;node1_ip&gt;  # Replace &lt;node1_ip&gt; with the actual IP address of your first managed node
node2 ansible_host=&lt;node2_ip&gt;  # Replace &lt;node2_ip&gt; with the actual IP address of your second managed node
```</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Place this file in the `/etc/ansible` directory or a custom path specified by the `--inventory-file` option when running Ansible playbooks.</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_step_3_test_connectivity"><a class="anchor" href="#_step_3_test_connectivity"></a>Step 3: Test Connectivity</h3>
<div class="paragraph">
<p>Test the connection to your managed nodes using the <code>ping</code> module to ensure Ansible can communicate with them. Run the following command on your control node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ansible webservers -m ping</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you see output similar to the following, connectivity is established successfully:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">node1 | success &gt;&gt; {
    "changed": false,
    "ping": "pong"
}
node2 | success &gt;&gt; {
    "changed": false,
    "ping": "pong"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_4_create_basic_playbooks"><a class="anchor" href="#_step_4_create_basic_playbooks"></a>Step 4: Create Basic Playbooks</h3>
<div class="paragraph">
<p>Create a simple Ansible playbook named <code>basic_playbook.yml</code> to demonstrate basic tasks such as installing the Apache web server and managing files.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
- hosts: webservers
  become: yes
  tasks:
    - name: Install apache2 package
      apt:
        name: apache2
        state: present

    - name: Copy index.html to /var/www/html
      copy:
        src: ./index.html
        dest: /var/www/html/index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create an <code>index.html</code> file with some content in the same directory as your playbook:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Ansible Lab&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Welcome to our simple Ansible automation lab!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_5_execute_playbooks"><a class="anchor" href="#_step_5_execute_playbooks"></a>Step 5: Execute Playbooks</h3>
<div class="paragraph">
<p>Run the playbook using the following command on your control node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ansible-playbook basic_playbook.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Monitor the output to ensure successful execution and observe that Apache is installed and the <code>index.html</code> file has been copied to each managed node.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h3>
<div class="paragraph">
<p>By completing this hands-on lab, you have successfully set up a simple Ansible environment, created an inventory, tested connectivity, and executed basic playbooks to automate system configuration tasks and manage files across multiple nodes. You can now explore more complex scenarios by adding roles, variables, and templates to your playbooks for enhanced automation capabilities.</p>
</div>
<div class="paragraph">
<p>Remember to clean up any resources you provisioned in the cloud provider or shut down virtual machines after finishing this lab to avoid unnecessary costs.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
